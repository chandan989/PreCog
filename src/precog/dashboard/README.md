# Dashboard Package

This package contains the Streamlit-based user interface (UI) and dashboard for the PreCog application.

## `app.py`

This module implements the main dashboard application using Streamlit. It provides an interactive interface for users to visualize data, monitor alerts, and understand insights generated by the PreCog system.

Key functionalities include:

- **Page Configuration**: Sets up the Streamlit page with a title, icon, layout (wide), and initial sidebar state.
- **System Initialization**: 
    - Uses `@st.cache_resource` to load and cache the `HyperlocalIntelligenceSystem` instance. This ensures the system (including its models) is loaded only once, improving performance.
    - Initializes the core system, which involves loading configurations and potentially training models if not already done.
    - Provides options in the sidebar to toggle LLM usage for various analytical tasks (sentiment, narratives, counter-narratives, interventions). These settings are passed to the system.
- **Sidebar Controls**:
    - Allows users to select the data source: synthetic data, upload custom CSV files (social media, news articles), or use existing data.
    - Provides toggles for enabling/disabling AI enhancements using LLMs for different analysis components.
    - Includes a time period selector (e.g., Last 24 Hours, Custom Range) for filtering data, though the actual filtering logic based on this selection might need further implementation within the data loading or analysis steps.
    - A refresh button to clear caches and rerun the application, ensuring the latest data and settings are used.
- **Data Loading and Analysis**:
    - Based on the user's selection, it loads data (either synthetic, uploaded, or from predefined paths).
    - Calls the `analyze_current_situation` method of the `HyperlocalIntelligenceSystem` to process the loaded data.
- **Dashboard Tabs and Visualization**:
    - The dashboard is organized into multiple tabs for clarity: "Overview", "Sentiment Analysis", "Misinformation", and "Interventions".
    - **Overview Tab**: Displays key metrics such as the number of sentiment alerts, misinformation threats, and friction risk zones. It also shows an overall risk score and a geographical map (using Folium) to visualize friction risk locations with markers indicating risk levels.
    - **Sentiment Analysis Tab**: Presents detailed sentiment analysis results. This includes a time series chart of average sentiment, a breakdown of sentiment categories (positive, negative, neutral), a list of high-impact sentiment alerts, and a word cloud of common terms from negative sentiment posts.
    - **Misinformation Tab**: Focuses on misinformation alerts. It lists detected misinformation narratives, their spread velocity, and potential impact. It may also include visualizations of misinformation trends over time.
    - **Interventions Tab**: Displays recommended interventions based on the detected risks and alerts. It lists suggested actions, their priority, and target areas.
- **Dynamic Updates**: The dashboard is designed to react to user inputs from the sidebar, reloading and re-analyzing data as needed.
- **Visualization Libraries**: Utilizes Plotly, Altair, and Folium for creating interactive charts, graphs, and maps.

To run the dashboard, you would typically execute `streamlit run app.py` from the `src/precog/dashboard` directory or the project root, ensuring all dependencies and the PreCog system components are correctly installed and accessible.